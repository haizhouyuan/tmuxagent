yuanhaizhou@YogaS2:~/projects/tmuxagent-worktrees/fleetai$ . ~/.proxy-on.sh && proxychains4 -q codex --dangerously-bypass-approvals-and-sandbox
âœ… ä»£ç†å·²å¯ç”¨
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ >_ OpenAI Codex (v0.41.0)                         â”‚
â”‚                                                   â”‚
â”‚ model:     gpt-5-codex high   /model to change    â”‚
â”‚ directory: ~/projects/tmuxagent-worktrees/fleetai â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

  To get started, describe a task or try one of these commands:

  /init - create an AGENTS.md file with instructions for Codex
  /status - show current session configuration
  /approvals - choose what Codex can do without approval
  /model - choose what model and reasoning effort to use

â–Œ '/home/yuanhaizhou/projects/tmuxagent-worktrees/fleetai/docs/å‡­è¯.md'
yuanhaizhou@YogaS2:~/projects/tmuxagent-worktrees/fleetai$ claude --dangerously-skip-permissions

ğŸŒŸ Welcome to Claude Code!
ğŸ”— You are using the canonical relay
ğŸ’¡ If the relay doesn't work, you can run `claude --pick-relay`


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¢ ANNOUNCEMENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ï¸ Codexå·²ä¸Šçº¿æœ¬ç«™
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Codexå·²ä¸Šçº¿æœ¬ç«™,é€šè¿‡æ§åˆ¶å°å‘½ä»¤å³å¯å®‰è£…é…ç½®å¹¶ä½¿ç”¨,ç›®å‰codexæ™ºå•†åœ¨çº¿,æ— éœ€é¢å¤–è®¢é˜…å³å¯ç•…äº«,æœ¬ç«™Codexå‡é‡‡ç”¨å®˜æ–¹æ­£ç‰ˆ200ç¾åˆ€è®¢é˜…ç±»å‹,æ¬¢è¿å¤§å®¶å‰æ¥æµ‹è¯•ä½“éªŒ!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ Press Enter to continue...

 
 âœ» Welcome to Claude Code!

   /help for help, /status for your current setup

   cwd: /home/yuanhaizhou/projects/tmuxagent-worktrees/fleetai

 Tips for getting started:

  Run /init to create a CLAUDE.md file with instructions for 
  Claude
  Run /terminal-setup to set up terminal integration
  Use Claude to help with file analysis, editing, bash commands 
  and git
  Be as specific as you would with another engineer for the best 
  results

> > å˜æ›´è¯´æ˜
                                                             
      y.py,
    - åœ¨ src/tmux_agent/notify.py 
  å¢åŠ ä¼ä¸šå¾®ä¿¡â€œåº”ç”¨æ¶ˆæ¯â€é€šé“ï¼šè¯»
    å– 
  WECOM_CORP_IDã€WECOM_AGENT_IDã€WECOM_APP_SECRETï¼Œè‡ªåŠ¨ç¼“å­˜ 
  to
    access_tokenï¼Œç»Ÿä¸€ä»¥ Markdown å‘é€å†…å®¹ï¼Œå¯é€‰ 
  WECOM_TOUSERï¼ˆé»˜orè®¤ä¸º                                     
                        repare
    @allï¼‰ã€WECOM_TOPARTYã€WECOM_TOTAGã€‚                     
      eps.
    - æ–°å¢ tests/test_notify.pyï¼Œè¦†ç›–ç¯å¢ƒå˜é‡ç¼ºå¤±ã€è·å– token
   å¤±
  è´¥ã€å‘
    é€æˆåŠŸå¹¶å‘½ä¸­ç¼“å­˜ç­‰åœºæ™¯ï¼Œç¡®ä¿é€»è¾‘ç¨³å®šã€‚
    - README æ–°å¢â€œé€šçŸ¥é€šé“â€å°èŠ‚ï¼Œè¯´æ˜ wecom_app 
  åŠæ‰€éœ€ç¯å¢ƒå˜é‡ï¼Œ
  æ–¹ä¾¿ç›´
    æ¥å¥—ç”¨ docs/å‡­è¯.md é‡Œçš„ä¼ä¸šå¾®ä¿¡å‡­è¯ã€‚                   
      è®¤ä¸º

    å¦‚ä½•ä½¿ç”¨                                                 
       ã€å‘

    1. åœ¨ agents é…ç½®é‡ŒæŠŠ notify è®¾ç½®ä¸º wecom_appã€‚          
       ä¾¿ç›´
    2. å¯¼å‡ºå‡­è¯ï¼š

       export WECOM_CORP_ID=ww963453c57ce43b45
       export WECOM_AGENT_ID=1000002
       export WECOM_APP_SECRET=eu-
    BbKawabreQTJPeacL63jVYllSJILrDVMHIjiTs2A
       export WECOM_TOUSER=xxxx  # å¯é€‰ï¼Œä¸è®¾é»˜è®¤ @all
    3. å¯åŠ¨è°ƒåº¦å™¨åï¼Œæ‰€æœ‰ policy 
  è§¦å‘çš„é€šçŸ¥éƒ½ä¼šç›´æ¥æ¨é€ç»™ä¼ä¸šå¾®ä¿¡åº”ç”¨ï¼›
    token ä¼šè‡ªåŠ¨ç»­æœŸã€‚

    å·²æ‰§è¡Œæµ‹è¯•
                                                             
      åº”ç”¨ï¼›
    - .venv/bin/python -m pytestæŒ‰ç…§è¿™ä¸ªæ‰§è¡Œ

â— I'll run the tests as requested to verify the WeChat Work
   (ä¼ä¸šå¾®ä¿¡) notification channel implementation.

â— Bash(.venv/bin/python -m pytest tests/test_notify.py -v)
  â¿ ============================= test session starts ====
    ==========================
    platform linux -- Python 3.11.2, pytest-8.4.2, pluggy-
    â€¦ +83 lines (ctrl+o to expand)



â— The tests passed successfully! All 3 test cases for the
  WeChat Work notification integration are working
  correctly:

  - âœ… test_wecom_app_missing_env - Handles missing
  environment variables properly
  - âœ… test_wecom_app_token_error - Handles token retrieval
   errors correctly
  - âœ… test_wecom_app_send_success_with_caching - Sends
  messages successfully and caches tokens

  The implementation covers the key scenarios mentioned in
  your change description:
  1. Environment variable validation
  2. Token caching and automatic renewal
  3. Message sending with proper error handling

  The tests show 69% coverage for src/tmux_agent/notify.py,
   which indicates good test coverage for the new WeChat
  Work functionality.

> å‘åˆ°å“ªé‡Œäº†

â— Looking at the test results, the WeChat Work
  notifications are being sent to a mock/test environment
  during testing. Let me check the actual notification
  configuration to see where messages would be sent in real
   usage.

â— Read(tests/test_notify.py)
  â¿  Read 134 lines (ctrl+o to expand)

â— æµ‹è¯•æ˜¯å‘åˆ°æ¨¡æ‹Ÿç¯å¢ƒçš„ã€‚åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œæ ¹æ®ä½ çš„é…ç½®è¯´æ˜ï¼Œæ¶ˆ
  æ¯ä¼šå‘åˆ°ï¼š

  ä¼ä¸šå¾®ä¿¡åº”ç”¨ ID 1000002ï¼Œå±äºä¼ä¸š ww963453c57ce43b45

  å‘é€ç›®æ ‡æ ¹æ®ç¯å¢ƒå˜é‡ç¡®å®šï¼š
  - WECOM_TOUSER=xiaozhang|xiaoli - å‘ç»™æŒ‡å®šç”¨æˆ·
  - å¦‚æœæœªè®¾ç½® WECOM_TOUSER - é»˜è®¤å‘ç»™ @allï¼ˆå…¨å‘˜ï¼‰
  - ä¹Ÿå¯è®¾ç½® WECOM_TOPARTY æˆ– WECOM_TOTAG
  å‘ç»™ç‰¹å®šéƒ¨é—¨æˆ–æ ‡ç­¾

  æµ‹è¯•ä¸­ä½¿ç”¨çš„æ˜¯å‡æ•°æ®ï¼ŒçœŸå®ç¯å¢ƒéœ€è¦ä½ é…ç½®çš„ä¼ä¸šå¾®ä¿¡å‡­è¯ã€‚

> ä½ ç»™æˆ‘é…ç½®å¥½ï¼Œæˆ‘è¦å‘åˆ°æˆ‘çš„ä¼ä¸šå¾®ä¿¡ä¸Š

â— æˆ‘éœ€è¦å…ˆæŸ¥çœ‹ç°æœ‰çš„é…ç½®æ–‡ä»¶å’Œç¯å¢ƒè®¾ç½®æ–¹å¼ï¼Œç„¶åå¸®ä½ é…ç½®ä¼
  ä¸šå¾®ä¿¡é€šçŸ¥ã€‚

â— Read(docs/å‡­è¯.md)
  â¿  Read 9 lines (ctrl+o to expand)

â— Search(pattern: "**/.env*")
  â¿  Found 0 files 

â— Search(pattern: "**/config*")
  â¿  Found 6 files (ctrl+o to expand)

â— Read(src/tmux_agent/config.py)
  â¿  Read 163 lines (ctrl+o to expand)

â— ç°åœ¨æˆ‘å¸®ä½ é…ç½®ä¼ä¸šå¾®ä¿¡é€šçŸ¥ã€‚æ ¹æ®ä½ çš„å‡­è¯æ–‡æ¡£ï¼Œæˆ‘ä¼šåˆ›å»ºç¯
  å¢ƒå˜é‡é…ç½®ï¼š

â— Write(.env)
  â¿  Wrote 10 lines to .env                               
     # ä¼ä¸šå¾®ä¿¡åº”ç”¨æ¶ˆæ¯é…ç½®
     WECOM_CORP_ID=ww963453c57ce43b45
     WECOM_AGENT_ID=1000002
     WECOM_APP_SECRET=eu-BbKawabreQTJPeacL63jVYllSJILrDVMHI
     jiTs2A
     # æ¶ˆæ¯æ¥æ”¶è€…è®¾ç½®ï¼ˆå¯é€‰ï¼‰
     # WECOM_TOUSER=@all  # é»˜è®¤å‘é€ç»™æ‰€æœ‰äºº
     # WECOM_TOUSER=xiaozhang|xiaoli  # å‘é€ç»™æŒ‡å®šç”¨æˆ·
     # WECOM_TOPARTY=éƒ¨é—¨ID  # å‘é€ç»™æŒ‡å®šéƒ¨é—¨
     # WECOM_TOTAG=æ ‡ç­¾ID  # å‘é€ç»™æŒ‡å®šæ ‡ç­¾

â— ç°åœ¨éœ€è¦åœ¨ä½ çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®é€šçŸ¥é€šé“ä¸º
  wecom_appã€‚è®©æˆ‘æŸ¥çœ‹æ˜¯å¦å·²æœ‰é…ç½®æ–‡ä»¶ï¼š

â— Bash(find . -name "*.yaml" -o -name "*.yml" | head -10)
  â¿ ./examples/policy.example.yaml                        
    ./examples/hosts.example.yaml
    ./.tmuxagent/worktrees/agent-mvp/examples/policy.examp
    â€¦ +3 lines (ctrl+o to expand)


â— Read(examples/hosts.example.yaml)
  â¿  Read 30 lines (ctrl+o to expand)

â— æˆ‘åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå°†é€šçŸ¥é€šé“è®¾ç½®ä¸ºä¼ä¸šå¾®ä¿¡ï¼š

â— Write(agent-config.yaml)
  â¿  Wrote 14 lines to agent-config.yaml    
     poll_interval_ms: 1500
     tmux_bin: tmux
     sqlite_path: ~/.tmux_agent/state.db
     approval_dir: ~/.tmux_agent/approvals
     notify: wecom_app  # è®¾ç½®ä¸ºä¼ä¸šå¾®ä¿¡é€šçŸ¥
     hosts:
       - name: local
         tmux:
           socket: default
           session_filters: []
     â€¦ +4 lines (ctrl+o to expand)

â— ç°åœ¨åˆ›å»ºä¸€ä¸ªæµ‹è¯•è„šæœ¬æ¥éªŒè¯é…ç½®ï¼š

â— Write(test_wecom.py)
  â¿  Wrote 43 lines to test_wecom.py             
     #!/usr/bin/env python3
     """æµ‹è¯•ä¼ä¸šå¾®ä¿¡é€šçŸ¥é…ç½®"""
     import os
     from dotenv import load_dotenv
     from src.tmux_agent.notify import Notifier,
     NotificationMessage
     # åŠ è½½ç¯å¢ƒå˜é‡
     load_dotenv()
     def test_wecom_notification():
     â€¦ +33 lines (ctrl+o to expand)

â— ç°åœ¨æµ‹è¯•é…ç½®ï¼š

â— Bash(.venv/bin/python test_wecom.py)
  â¿  Error: âœ… ç¯å¢ƒå˜é‡æ£€æŸ¥é€šè¿‡
     ğŸ“¤ æ­£åœ¨å‘é€æµ‹è¯•æ¶ˆæ¯åˆ°ä¼ä¸šå¾®ä¿¡...
     âŒ å‘é€å¤±è´¥: Using SOCKS proxy, but the 'socksio' package 
     is not installed. Make sure to install httpx using `pip 
     install httpx[socks]`.

â— éœ€è¦å®‰è£… dotenv å’Œå¤„ç†ä»£ç†é—®é¢˜ï¼š

â— Bash(.venv/bin/pip install python-dotenv)
  â¿ Requirement already satisfied: python-dotenv in ./.ven
    v/lib/python3.11/site-packages (1.1.1)


â— Bash(unset HTTP_PROXY HTTPS_PROXY http_proxy https_proxy &&
      .venv/bin/python test_wecom.py)
  â¿  Error: âœ… ç¯å¢ƒå˜é‡æ£€æŸ¥é€šè¿‡
     ğŸ“¤ æ­£åœ¨å‘é€æµ‹è¯•æ¶ˆæ¯åˆ°ä¼ä¸šå¾®ä¿¡...
     âŒ å‘é€å¤±è´¥: Using SOCKS proxy, but the 'socksio' package 
     is not installed. Make sure to install httpx using `pip 
     install httpx[socks]`.

â— è®©æˆ‘æ£€æŸ¥ç¯å¢ƒä¸­çš„ä»£ç†è®¾ç½®ï¼š

â— Bash(env | grep -i proxy)
  â¿  no_proxy=localhost,127.0.0.1,::1 
     https_proxy=http://127.0.0.1:7890
     NO_PROXY=localhost,127.0.0.1,::1
     â€¦ +4 lines (ctrl+o to expand)

â— éœ€è¦å®‰è£… socks æ”¯æŒæˆ–ä¿®æ”¹æµ‹è¯•è„šæœ¬ä¸´æ—¶ç¦ç”¨ä»£ç†ï¼š

â— Update(test_wecom.py)
  â¿  Updated test_wecom.py with 8 additions             
        7    # åŠ è½½ç¯å¢ƒå˜é‡
        8    load_dotenv()
        9    
       10 +  # ä¸´æ—¶ç¦ç”¨ä»£ç†è®¾ç½®
       11 +  proxy_vars = ['http_proxy', 'https_proxy', 
          + 'HTTP_PROXY', 'HTTPS_PROXY', 'all_proxy']
       12 +  original_proxies = {}
       13 +  for var in proxy_vars:
       14 +      if var in os.environ:
       15 +          original_proxies[var] = 
          + os.environ[var]
       16 +          del os.environ[var]
       17 +  
       18    def test_wecom_notification():
       19        """æµ‹è¯•ä¼ä¸šå¾®ä¿¡é€šçŸ¥å‘é€"""
       20        # æ£€æŸ¥å¿…éœ€çš„ç¯å¢ƒå˜é‡

â— Bash(.venv/bin/python test_wecom.py)
  â¿  Error: âœ… ç¯å¢ƒå˜é‡æ£€æŸ¥é€šè¿‡
     ğŸ“¤ æ­£åœ¨å‘é€æµ‹è¯•æ¶ˆæ¯åˆ°ä¼ä¸šå¾®ä¿¡...
     âŒ å‘é€å¤±è´¥: WeCom send message failed: {'errcode': 60020, 
     'errmsg': 'not allow to access from your ip, hint: 
     [1758794086107082606871475], from ip: 122.231.213.137, more
      info at 
     https://open.work.weixin.qq.com/devtool/query?e=60020'}

â— IP å—é™é—®é¢˜ã€‚è¿™æ˜¯ä¼ä¸šå¾®ä¿¡çš„å®‰å…¨è®¾ç½®ï¼Œéœ€è¦åœ¨ä¼ä¸šå¾®ä¿¡ç®¡ç†å
  å°é…ç½®å¯ä¿¡IPã€‚ç°åœ¨é…ç½®å·²ç»å®Œæˆï¼Œæˆ‘æ¥æ€»ç»“ä¸€ä¸‹ï¼š

â— âœ… ä¼ä¸šå¾®ä¿¡é€šçŸ¥å·²é…ç½®å®Œæˆï¼

  å·²å®Œæˆçš„é…ç½®ï¼š

  1. ç¯å¢ƒå˜é‡æ–‡ä»¶ (.env):
  WECOM_CORP_ID=ww963453c57ce43b45
  WECOM_AGENT_ID=1000002
  WECOM_APP_SECRET=eu-BbKawabreQTJPeacL63jVYllSJILrDVMHIjiT
  s2A
  2. ä»£ç†é…ç½®æ–‡ä»¶ (agent-config.yaml):
  notify: wecom_app  # è®¾ç½®é€šçŸ¥é€šé“ä¸ºä¼ä¸šå¾®ä¿¡

  âš ï¸ éœ€è¦è§£å†³IPç™½åå•é—®é¢˜ï¼š

  æµ‹è¯•æ˜¾ç¤ºé”™è¯¯ç  60020ï¼Œè¡¨ç¤ºå½“å‰IP 122.231.213.137
  ä¸åœ¨ä¼ä¸šå¾®ä¿¡åº”ç”¨çš„å¯ä¿¡IPåˆ—è¡¨ä¸­ã€‚

  è§£å†³æ–¹æ³•ï¼š
  1. ç™»å½• https://work.weixin.qq.com/
  2. è¿›å…¥"åº”ç”¨ç®¡ç†" â†’ æ‰¾åˆ°ä½ çš„åº”ç”¨ï¼ˆID: 1000002ï¼‰
  3. åœ¨"ç½‘ç»œé…ç½®"æˆ–"IPç™½åå•"ä¸­æ·»åŠ å½“å‰IP: 122.231.213.137

  ä½¿ç”¨æ–¹æ³•ï¼š
  # åŠ è½½ç¯å¢ƒå˜é‡å¹¶å¯åŠ¨ä»£ç†
  source .env
  # è¿è¡Œä½ çš„ tmux-agentï¼Œæ‰€æœ‰é€šçŸ¥éƒ½ä¼šå‘åˆ°ä¼ä¸šå¾®ä¿¡

  é…ç½®æ— è¯¯ï¼Œåªéœ€æ·»åŠ IPç™½åå•å³å¯æ­£å¸¸ä½¿ç”¨ï¼
  
  chatgpt:
  
  å¥½çš„ï¼Œæˆ‘æ¥æŠŠâ€œä¼ä¸šå¾®ä¿¡åº”ç”¨æ¶ˆæ¯ï¼ˆWeCom Appï¼‰â€é€šçŸ¥é€šé“ä»**ä»£ç åˆ°ç¯å¢ƒåˆ°ç½‘ç»œ**ä¸€æ­¥åˆ°ä½ç»™ä½ é…å¥½ï¼Œå¹¶æŠŠä½ ç°åœ¨é‡åˆ°çš„ `errcode 60020 (not allow to access from your ip)` å½»åº•è§£å†³ã€‚ä»¥ä¸‹å†…å®¹ä½ å¯ä»¥**åŸæ ·æ‹·åˆ°å‘½ä»¤è¡Œ/é…ç½®æ–‡ä»¶**é‡Œç”¨ã€‚

---

# ä¸€ã€å…ˆè¯´ç»“è®ºï¼ˆä½ ç°åœ¨çš„é˜»å¡ç‚¹ï¼‰

* ä½ çš„æµ‹è¯•å·²èµ°åˆ°â€œçœŸå®è”é€šä¼ä¸šå¾®ä¿¡ APIâ€çš„é˜¶æ®µï¼Œä½†è¢«**ä¼ä¸šå¾®ä¿¡æ¥å£ IP ç™½åå•**æ‹¦ä½äº†ï¼š
  `not allow to access from your ip ... from ip: 122.231.213.137`
* è¿™ä¸ª `122.231.213.137` æ˜¯ä½ å½“å‰**å®é™…å¯¹å¤–å‡ºå£ IP**ï¼ˆå¾ˆå¯èƒ½æ˜¯ä»£ç†/å®¶å®½NATå‡ºå£ï¼‰ï¼Œéœ€è¦æŠŠå®ƒåŠ å…¥**ä¼ä¸šå¾®ä¿¡ç®¡ç†åå° â†’ è‡ªå»ºåº”ç”¨çš„â€œå¯ä¿¡IP/æ¥å£IPç™½åå•â€**ã€‚
* ä½ ç¯å¢ƒé‡Œæœ‰ `proxychains4 / HTTP(S)_PROXY` ç­‰ä»£ç†è®¾ç½®ï¼›è‹¥ç»§ç»­èµ°ä»£ç†ï¼Œ**è¢«ç™½åå•æ”¾è¡Œçš„å°±å¿…é¡»æ˜¯ä»£ç†çš„å‡ºå£ IP**ï¼›å¦‚æœä½ æ”¹ä¸ºç›´è¿ï¼Œå¿…é¡»æŠŠ**æœ¬æœºçš„å…¬ç½‘å‡ºå£ IP**åŠ å…¥ç™½åå•ã€‚

> å»ºè®®è·¯çº¿ï¼ˆç¨³å®š & å¯ç»´æŠ¤ï¼‰
> **é€‰ä¸€ä¸ªæœ‰å›ºå®šå…¬ç½‘IPçš„ä¸»æœºï¼ˆå¦‚ä½ çš„ NASã€é˜¿é‡Œäº‘ECSï¼‰ä½œä¸ºâ€œé€šçŸ¥å‡ºå£â€**ï¼š
>
> 1. åœ¨ä¼ä¸šå¾®ä¿¡åå°æŠŠè¿™å°æœºå™¨çš„å…¬ç½‘IPåŠ å…¥ç™½åå•ï¼›
> 2. ä¿è¯æ‰€æœ‰åˆ° `qyapi.weixin.qq.com` çš„è°ƒç”¨éƒ½ä»è¿™å°æœºå™¨ç›´è¿å‘å‡ºï¼ˆä¸ç»ä»£ç†ï¼‰ã€‚
>    è¿™æ ·æœ€ç¨³ï¼Œåç»­ä¸ä¼šå› ä¸ºä»£ç†IPå˜åŒ–è€Œé¢‘ç¹æ”¹ç™½åå•ã€‚

---

# äºŒã€æœ€å°å¯ç”¨é…ç½®ï¼ˆæœ¬åœ°éªŒè¯æ­¥éª¤ï¼‰

## 1. ä¾èµ–ä¸ç¯å¢ƒå‡†å¤‡

```bash
# è¿›å…¥ venv
source .venv/bin/activate

# å®‰è£… httpx çš„ socks æ‰©å±•ï¼ˆä½ ä¹‹å‰çš„é”™è¯¯æç¤ºéœ€è¦å®ƒï¼‰
pip install "httpx[socks]" python-dotenv
```

> å¦‚æœä½ æœ€ç»ˆé€‰æ‹©**å¯¹ä¼ä¸šå¾®ä¿¡ç›´è¿**ï¼Œä¹Ÿå¯ä»¥ä¸éœ€è¦ socks æ”¯æŒï¼Œä½†ä¸ºäº†ä½ å¹³æ—¶å…¶å®ƒæµé‡è¿˜èµ°ä»£ç†ï¼Œå»ºè®®è£…ä¸Šï¼Œä¿æŒçµæ´»ã€‚

## 2. æ•æ„Ÿä¿¡æ¯ä¸ .envï¼ˆæ³¨æ„ä¸è¦æ³„éœ²ï¼ï¼‰

ä½ ä»“åº“é‡Œçš„ `.env` è¯·è¿™æ ·å†™ï¼ˆåˆ«å†æ˜æ–‡è´´åˆ°èŠå¤©/PRé‡Œï¼‰ï¼š

```dotenv
# ä¼ä¸šå¾®ä¿¡åº”ç”¨æ¶ˆæ¯é…ç½®ï¼ˆç¤ºä¾‹ï¼šè¯·è‡ªè¡Œæ›¿æ¢çœŸå®å€¼ï¼‰
WECOM_CORP_ID=ww963453c57ce43b45
WECOM_AGENT_ID=1000002
WECOM_APP_SECRET=***REDACTED***   # åˆ«å†æ˜æ–‡å¯¹å¤–
# å¯é€‰çš„æ¥æ”¶èŒƒå›´ï¼ˆæ‹©ä¸€æˆ–éƒ½ä¸å¡«ï¼‰
# WECOM_TOUSER=@all
# WECOM_TOUSER=xiaozhang|xiaoli
# WECOM_TOPARTY=2|5
# WECOM_TOTAG=3
```

æƒé™åŠ å›ºï¼ˆé¿å…è¯¯æ³„ï¼‰ï¼š

```bash
chmod 600 .env
git update-index --assume-unchanged .env
```

## 3. ä»£ç†ç­–ç•¥ï¼ˆå¼ºçƒˆæ¨èï¼šå¯¹ qyapi ç›´è¿ï¼‰

ç›®æ ‡ï¼šä¼ä¸šå¾®ä¿¡ API èµ°ç›´è¿ï¼Œå…¶å®ƒä¾æ—§èµ°ä»£ç†ã€‚

### æ–¹æ¡ˆ Aï¼šé€šè¿‡ç¯å¢ƒå˜é‡æ’é™¤ï¼ˆæœ€ç®€å•ï¼‰

```bash
# åœ¨å½“å‰ shell ä¼šè¯é‡Œï¼Œä»…å¯¹ wecom ç›¸å…³åŸŸåç¦ç”¨ä»£ç†ï¼š
export NO_PROXY="localhost,127.0.0.1,::1,qyapi.weixin.qq.com,open.work.weixin.qq.com"
export no_proxy="$NO_PROXY"
```

> è¯´æ˜ï¼š`qyapi.weixin.qq.com` æ˜¯ä¸»è¦æ¥å£åŸŸåï¼›`open.work.weixin.qq.com` ç”¨äºè°ƒè¯•é¡µé¢ï¼Œä¸ä¸€å®šè°ƒç”¨ï¼Œä½†åŠ ä¸Šæ— å®³ã€‚

### æ–¹æ¡ˆ Bï¼šä»£ç å†…å¼ºåˆ¶ç›´è¿ï¼ˆå¯¹ httpx å®¢æˆ·ç«¯è®¾å®šï¼‰

å¦‚æœä½ åœ¨ `src/tmux_agent/notify.py` ç”¨ `httpx`ï¼Œå¯ä»¥åœ¨åˆ›å»ºå®¢æˆ·ç«¯æ—¶å¼ºåˆ¶å¿½ç•¥ç³»ç»Ÿä»£ç†ï¼š

```python
import httpx

client = httpx.Client(
    base_url="https://qyapi.weixin.qq.com",
    timeout=10.0,
    trust_env=False,      # ä¸ç»§æ‰¿ç¯å¢ƒå˜é‡é‡Œçš„ä»£ç†
    proxies=None          # æ˜ç¡®ä¸ä½¿ç”¨ä»£ç†
)
```

> æ¨èåœ¨**ä»…ä¼ä¸šå¾®ä¿¡çš„å®¢æˆ·ç«¯**ä¸Šè®¾æ­¤é¡¹ï¼Œé¿å…å½±å“å…¶å®ƒéœ€è¦ä»£ç†çš„è¯·æ±‚ã€‚

---

# ä¸‰ã€ä¼ä¸šå¾®ä¿¡åå°ï¼šæŠŠâ€œå®é™…å‡ºå£IPâ€åŠ å…¥ç™½åå•

> åå°å…¥å£åœ¨ä¸åŒç‰ˆæœ¬é‡Œåç§°ç•¥æœ‰å·®å¼‚ï¼Œå¸¸è§ä¸¤å¤„ï¼š
>
> * **åº”ç”¨ç®¡ç† â†’ ä½ åˆ›å»ºçš„è‡ªå»ºåº”ç”¨ â†’ å¼€å‘ç®¡ç† â†’ æ¥å£IPç™½åå• / å¯ä¿¡IP**
> * æˆ– **ç®¡ç†å·¥å…· â†’ å®‰å…¨ä¸ä¿å¯† â†’ æ¥å£IPç™½åå•**

éœ€è¦åŠ å…¥çš„å°±æ˜¯**è°ƒç”¨æ—¶æ˜¾ç¤ºçš„ from ip**ã€‚ä½ æ—¥å¿—é‡Œæ˜¯ï¼š

```
from ip: 122.231.213.137
```

> å¦‚æœä½ æ”¹ä¸ºç›´è¿ï¼Œè¿™ä¸ªIPä¼šå˜æˆä½ çš„ä¸»æœºå…¬ç½‘IPã€‚
> å¦‚æœä½ èµ°ä»£ç†ï¼Œè¿™ä¸ªæ˜¯**ä»£ç†çš„å‡ºå£IP**ï¼Œé‚£å°±åº”è¯¥æŠŠ**ä»£ç†å‡ºå£**åŠ å…¥ç™½åå•ã€‚

### å¿«é€ŸæŸ¥â€œå½“å‰å°†è¦è¢«ä¼ä¸šå¾®ä¿¡çœ‹åˆ°çš„å‡ºå£IPâ€

* èµ°ä»£ç†æƒ…å†µä¸‹ï¼ˆæ¨¡æ‹ŸçœŸå®è°ƒç”¨è·¯å¾„ï¼‰ï¼š

  ```bash
  # å¦‚æœä½ ç”¨ proxychains4ï¼š
  proxychains4 -q curl -s https://ipinfo.io/ip
  ```
* ç›´è¿æƒ…å†µä¸‹ï¼š

  ```bash
  curl -s https://ipinfo.io/ip
  # æˆ–
  dig +short TXT o-o.myaddr.l.google.com @ns1.google.com | tr -d '"'
  ```

> æŠŠå¾—åˆ°çš„ IP å¡«è¿›ç™½åå•ï¼›å¦‚æœä½ æœ‰å¤šæ¡å‡ºå£ï¼ˆå®¶å®½+ä»£ç†+äº‘ä¸»æœºï¼‰ï¼Œ**å…¨éƒ½åŠ ä¸Š**ã€‚

---

# å››ã€å‘é€â€œçœŸå®â€è”é€šæµ‹è¯•ï¼ˆç»•è¿‡ä½ å…ˆå‰çš„ test\_wecom.py é™åˆ¶ï¼‰

æˆ‘ç»™ä½ ä¸€ä¸ª**ç‹¬ç«‹çš„æœ€å°å‘é€è„šæœ¬**ï¼ˆåªä¾èµ– `.env`ï¼Œå¹¶ä¸”å¯¹ WeCom å¼ºåˆ¶ç›´è¿ï¼‰ï¼Œä½ ç›´æ¥è·‘å®ƒç¡®è®¤â€œç™½åå•+è¿é€šâ€OKï¼š

```python
# file: scripts/wecom_smoke_test.py
import os, sys, json, time
from dotenv import load_dotenv
import httpx

def must_get(name: str) -> str:
    v = os.getenv(name)
    if not v:
        print(f"[FAIL] missing env: {name}", file=sys.stderr)
        sys.exit(2)
    return v

def main():
    load_dotenv()
    corp_id = must_get("WECOM_CORP_ID")
    agent_id = must_get("WECOM_AGENT_ID")
    secret  = must_get("WECOM_APP_SECRET")
    touser  = os.getenv("WECOM_TOUSER", "@all")
    toparty = os.getenv("WECOM_TOPARTY")
    totag   = os.getenv("WECOM_TOTAG")

    # å¼ºåˆ¶ç›´è¿ï¼Œä¸èµ°ä»£ç†
    with httpx.Client(trust_env=False, proxies=None, timeout=10.0) as c:
        # 1) gettoken
        r = c.get("https://qyapi.weixin.qq.com/cgi-bin/gettoken",
                  params={"corpid": corp_id, "corpsecret": secret})
        data = r.json()
        if data.get("errcode") != 0:
            print("[FAIL] gettoken:", data, file=sys.stderr)
            sys.exit(3)
        token = data["access_token"]
        # 2) send message (Markdown)
        url = "https://qyapi.weixin.qq.com/cgi-bin/message/send"
        payload = {
            "touser": touser,
            "agentid": int(agent_id),
            "msgtype": "markdown",
            "markdown": {"content": f"**WeCom Smoke Test**\n> {time.ctime()} æ¥è‡ª tmux-agent"},
            "duplicate_check_interval": 600,
        }
        if toparty: payload["toparty"] = toparty
        if totag:   payload["totag"]   = totag
        r2 = c.post(url, params={"access_token": token}, json=payload)
        d2 = r2.json()
        if d2.get("errcode") == 0:
            print("[OK] message sent:", json.dumps(d2, ensure_ascii=False))
            sys.exit(0)
        else:
            print("[FAIL] send:", d2, file=sys.stderr)
            sys.exit(4)

if __name__ == "__main__":
    main()
```

è¿è¡Œï¼š

```bash
python scripts/wecom_smoke_test.py
```

**æœŸæœ›ç»“æœï¼š**

* å¦‚æœç™½åå•æœªé…ã€æˆ–èµ°äº†æœªæ”¾è¡Œçš„å‡ºå£IP â†’ ä»ä¼šæŠ¥ 60020
* ç™½åå•é…ç½®æ­£ç¡® â†’ è¾“å‡º `[OK] message sent: {"errcode":0,...}`ï¼Œæ‰‹æœºç«¯ä¼ä¸šå¾®ä¿¡èƒ½æ”¶åˆ°

---

# äº”ã€æŠŠé€šçŸ¥é€šé“æ¥å…¥ä½ çš„ tmux-agent

ä½ å·²ç»æœ‰ `agent-config.yaml`ï¼š

```yaml
poll_interval_ms: 1500
tmux_bin: tmux
sqlite_path: ~/.tmux_agent/state.db
approval_dir: ~/.tmux_agent/approvals
notify: wecom_app   # ä½¿ç”¨ä¼ä¸šå¾®ä¿¡åº”ç”¨æ¶ˆæ¯
hosts:
  - name: local
    tmux:
      socket: default
      session_filters: []
```

> ç¡®ä¿ `src/tmux_agent/notify.py` çš„ `wecom_app` å®ç°é‡Œï¼š
>
> * token æœ‰**æ–‡ä»¶ç¼“å­˜**ï¼ˆå»ºè®®è½åˆ° `~/.tmux_agent/wecom_token.json`ï¼‰ï¼Œè‡³å°‘åŒ…å« `access_token`ã€`expires_at`ï¼ˆUNIX tsï¼‰ï¼Œä¸´è¿‘è¿‡æœŸè‡ªåŠ¨åˆ·æ–°ï¼›
> * HTTP å®¢æˆ·ç«¯é’ˆå¯¹ WeCom å¼ºåˆ¶ `trust_env=False, proxies=None` æˆ–æŒ‰ä½ çš„ç­–ç•¥æ³¨å…¥ `NO_PROXY`ã€‚

**æ¨èçš„ token ç¼“å­˜ç‰‡æ®µï¼ˆä¼ªä»£ç ï¼‰**ï¼š

```python
import json, time, os, httpx, threading
CACHE_PATH = os.path.expanduser("~/.tmux_agent/wecom_token.json")
LOCK = threading.Lock()

def _load_cache():
    try:
        with open(CACHE_PATH, "r") as f:
            return json.load(f)
    except:
        return {}

def _save_cache(data):
    os.makedirs(os.path.dirname(CACHE_PATH), exist_ok=True)
    tmp = CACHE_PATH + ".tmp"
    with open(tmp, "w") as f:
        json.dump(data, f)
    os.replace(tmp, CACHE_PATH)

def get_access_token(corp_id, secret):
    with LOCK:
        cache = _load_cache()
        now = int(time.time())
        if cache.get("access_token") and cache.get("expires_at", 0) - now > 180:
            return cache["access_token"]
        with httpx.Client(trust_env=False, proxies=None, timeout=10.0) as c:
            r = c.get("https://qyapi.weixin.qq.com/cgi-bin/gettoken",
                      params={"corpid": corp_id, "corpsecret": secret})
            data = r.json()
            if data.get("errcode") != 0:
                raise RuntimeError(f"WeCom token error: {data}")
            token = data["access_token"]
            # å®˜æ–¹ç»™çš„ expires_in ä¸€èˆ¬ 7200 ç§’
            expires_at = now + int(data.get("expires_in", 7200))
            cache = {"access_token": token, "expires_at": expires_at}
            _save_cache(cache)
            return token
```

---

# å…­ã€ç³»ç»ŸæœåŠ¡åŒ–ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰

å¦‚æœä½ æŠŠ `tmux-agent` ä½œä¸º systemd ç”¨æˆ·æœåŠ¡è·‘ï¼Œéœ€è¦æŠŠ `.env` æ³¨å…¥ç¯å¢ƒå¹¶**ç¡®ä¿ NO\_PROXY ç”Ÿæ•ˆ**ï¼š

`~/.config/systemd/user/tmux-agent.service`ï¼ˆç¤ºä¾‹ï¼‰ï¼š

```ini
[Unit]
Description=Tmux Agent with WeCom Notify

[Service]
Type=simple
WorkingDirectory=%h/projects/tmuxagent-worktrees/fleetai
EnvironmentFile=%h/projects/tmuxagent-worktrees/fleetai/.env
# å¯¹ä¼ä¸šå¾®ä¿¡ç›´è¿
Environment=NO_PROXY=localhost,127.0.0.1,::1,qyapi.weixin.qq.com,open.work.weixin.qq.com
Environment=no_proxy=localhost,127.0.0.1,::1,qyapi.weixin.qq.com,open.work.weixin.qq.com
ExecStart=%h/projects/tmuxagent-worktrees/fleetai/.venv/bin/python -m src.tmux_agent.run --config %h/projects/tmuxagent-worktrees/fleetai/agent-config.yaml
Restart=always

[Install]
WantedBy=default.target
```

å¯ç”¨ï¼š

```bash
systemctl --user daemon-reload
systemctl --user enable --now tmux-agent
systemctl --user status tmux-agent --no-pager
```

---

# ä¸ƒã€GitHub Actions/CI é‡Œå‘ä¼ä¸šå¾®ä¿¡ï¼ˆå¯é€‰ï¼‰

æŠŠä¸‹é¢å‡ ä¸ª Secrets é…è¿›å»ï¼š`WECOM_CORP_ID` `WECOM_AGENT_ID` `WECOM_APP_SECRET` `WECOM_TOUSER`ï¼ˆå¯é€‰ï¼‰ã€‚
**æ³¨æ„ï¼šRunner çš„å‡ºå£ IP ä¹Ÿè¦åœ¨ç™½åå•é‡Œ**ï¼ˆGitHub æ‰˜ç®¡ Runner IP å˜åŒ–å¤§ï¼Œä¸æ¨èï¼›å¯ç”¨è‡ªæ‰˜ç®¡ Runnerï¼‰ã€‚

ç¤ºä¾‹ Job æ­¥éª¤ï¼ˆPythonï¼‰ï¼š

```yaml
- name: Send WeCom notify
  if: always()
  env:
    WECOM_CORP_ID: ${{ secrets.WECOM_CORP_ID }}
    WECOM_AGENT_ID: ${{ secrets.WECOM_AGENT_ID }}
    WECOM_APP_SECRET: ${{ secrets.WECOM_APP_SECRET }}
    WECOM_TOUSER: ${{ secrets.WECOM_TOUSER }}
    NO_PROXY: "qyapi.weixin.qq.com,open.work.weixin.qq.com,127.0.0.1,localhost,::1"
  run: |
    python - <<'PY'
    import os, httpx, time
    corp = os.environ["WECOM_CORP_ID"]
    agent = os.environ["WECOM_AGENT_ID"]
    secret= os.environ["WECOM_APP_SECRET"]
    touser= os.environ.get("WECOM_TOUSER","@all")
    with httpx.Client(trust_env=False, proxies=None, timeout=10.0) as c:
        t = c.get("https://qyapi.weixin.qq.com/cgi-bin/gettoken",
                  params={"corpid": corp, "corpsecret": secret}).json()
        if t.get("errcode")!=0: raise SystemExit(t)
        r = c.post("https://qyapi.weixin.qq.com/cgi-bin/message/send",
                   params={"access_token": t["access_token"]},
                   json={"touser": touser, "agentid": int(agent),
                         "msgtype":"markdown",
                         "markdown":{"content": f"**CIé€šçŸ¥**\n> {time.ctime()}"},
                         "duplicate_check_interval":600}).json()
        if r.get("errcode")!=0: raise SystemExit(r)
    PY
```

---

# å…«ã€å¸¸è§é”™è¯¯ä¸€è§ˆï¼ˆå¯¹ç…§æ’éšœï¼‰

| errcode | å«ä¹‰/å…¸å‹åŸå›                | è§£å†³                                       |
| ------- | --------------------- | ---------------------------------------- |
| 60020   | ä¸åœ¨å¯ä¿¡IP/æ¥å£ç™½åå•          | æŠŠ**å®é™…å‡ºå£IP**åŠ ç™½ï¼ˆä»£ç†å‡ºå£æˆ–ç›´è¿å‡ºå£ï¼‰ï¼Œå¤šå‡ºå£éƒ½åŠ            |
| 40014   | invalid access\_token | åˆ·æ–° tokenï¼›æ£€æŸ¥ corp\_id/secretï¼›é¿å…å¤ç”¨è¿‡æœŸ token |
| 42001   | access\_token expired | åŒä¸Šï¼Œé‡æ–°è·å–ï¼›å®ç°æœ¬åœ°ç¼“å­˜å¹¶è‡ªåŠ¨æ›´æ–°                      |
| 40003   | invalid openid        | `touser` å¡«å†™é”™è¯¯ï¼›ç¡®è®¤æˆå‘˜åœ¨ä¼ä¸šå†…ä¸”å·²åˆ†é…åˆ°æ­¤åº”ç”¨å¯è§èŒƒå›´       |
| 81013   | user not in app       | ç”¨æˆ·ä¸åœ¨è¯¥â€œè‡ªå»ºåº”ç”¨â€çš„å¯è§èŒƒå›´ï¼›åˆ°åº”ç”¨å¯è§èŒƒå›´é‡Œæ·»åŠ               |
| 45009   | æ¥å£è°ƒç”¨è¶…ä¸Šé™               | é™é¢‘ã€åˆå¹¶æ¶ˆæ¯ï¼Œæˆ–å»¶è¿Ÿå‘é€                            |
| 41001   | ç¼ºå°‘ access\_token å‚æ•°   | URL æ¼äº† `?access_token=`ï¼›æˆ– POST é”™è·¯å¾„       |

---

# ä¹ã€å¦‚æœä½ ä¸æƒ³æŠ˜è…¾ç™½åå•ï¼šä¸¤ç§æ›¿ä»£è·¯å¾„

1. **ä¼ä¸šå¾®ä¿¡ç¾¤æœºå™¨äººï¼ˆWebhookï¼‰**

   * åªè¦åœ¨ç¾¤é‡ŒåŠ â€œç¾¤æœºå™¨äººâ€ï¼Œå°±èƒ½ç›´æ¥ç”¨ webhook URL å‘ Markdownï¼Œæ— éœ€ç™½åå•ï¼›
   * ç¼ºç‚¹ï¼šå‘åˆ°â€œç¾¤â€ï¼Œéâ€œåº”ç”¨æ¶ˆæ¯â€ï¼›å®‰å…¨ä¸Šè¦å°å¿ƒå¤–æ³„ webhookã€‚

2. **å›ºå®šå‡ºå£ä¸­è½¬ï¼ˆåå‘ä»£ç†ï¼‰**

   * åœ¨ä½ æœ‰å›ºå®šIPçš„äº‘ä¸»æœºä¸Šèµ·ä¸€ä¸ª**æç®€è½¬å‘ API**ï¼ˆFastAPI/Nginxï¼‰ï¼Œå†…éƒ¨æŠŠè¯·æ±‚è½¬ç»™ `qyapi.weixin.qq.com`ï¼›
   * ä¼ä¸šå¾®ä¿¡ç™½åå•é‡ŒåªåŠ è¿™ä¸ªäº‘ä¸»æœºIPï¼›ä¸šåŠ¡ç«¯æŠŠ WeCom è¯·æ±‚éƒ½æ‰“åˆ°è¿™ä¸ªä¸­è½¬å³å¯ã€‚
   * ç¼ºç‚¹ï¼šä½ è¦ç»´æŠ¤ä¸€ä¸ªä¸­è½¬æœåŠ¡ï¼ˆå¯ä»¥ 50 è¡Œä»£ç æå®šï¼‰ã€‚

---

# åã€ä½ ç°åœ¨è¦åšçš„æœ€å°åŠ¨ä½œæ¸…å• âœ…

1. **ç¡®å®šå‡ºå£è·¯å¾„**ï¼šå†³å®šä¼ä¸šå¾®ä¿¡ API æ˜¯**ç›´è¿**è¿˜æ˜¯**èµ°ä»£ç†**ã€‚
2. **æŸ¥å‡ºå£ IP**ï¼ˆæŒ‰ä¸Šé¢å‘½ä»¤ï¼‰å¹¶**åŠ å…¥ä¼ä¸šå¾®ä¿¡ç™½åå•**ã€‚
3. **è®¾ç½® NO\_PROXY** æˆ–åœ¨ä»£ç é‡Œå¯¹ WeCom å®¢æˆ·ç«¯ `trust_env=False, proxies=None`ã€‚
4. è¿è¡Œ `python scripts/wecom_smoke_test.py`ï¼šçœ‹åˆ° `[OK] message sent` å³æ‰“é€šã€‚
5. å¯åŠ¨ `tmux-agent`ï¼Œè§¦å‘ä¸€æ¡é€šçŸ¥ï¼ˆæ¯”å¦‚æ‰‹å·¥è§¦å‘ policyï¼‰ï¼ŒéªŒè¯æ‰‹æœºç«¯èƒ½æ”¶åˆ°ã€‚

---

éœ€è¦æˆ‘æŠŠä½  `src/tmux_agent/notify.py` çš„ WeCom å®¢æˆ·ç«¯éƒ¨åˆ†**æ”¹æˆå¯ç›´è¿/å¯ä»£ç†äºŒé€‰ä¸€ã€å¸¦æ–‡ä»¶çº§ token ç¼“å­˜**çš„å®Œæ•´è¡¥ä¸å—ï¼Ÿæˆ‘å¯ä»¥ç›´æ¥ç»™å‡º**å¯ç²˜è´´çš„ diff**ã€‚å¦å¤–ï¼Œå¦‚æœä½ é€‰æ‹©â€œäº‘ä¸»æœºä¸­è½¬â€æ–¹æ¡ˆï¼Œæˆ‘ä¹Ÿå¯ä»¥ç»™ä½ ä¸€ä»½**FastAPI åä»£åˆ° qyapi**çš„æœ€å°å®ç°ï¼ˆå« systemd ä¸ Nginx é…ç½®ï¼‰ã€‚
